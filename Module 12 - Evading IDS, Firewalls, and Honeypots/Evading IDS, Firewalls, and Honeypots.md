<div _ngcontent-ng-c2673589256="" inline-copy-host="" class="markdown markdown-main-panel stronger enable-updated-hr-color" id="model-response-message-contentr_7f5793fee3306c21" aria-live="polite" aria-busy="false" dir="ltr" style="--animation-duration: 400ms; --fade-animation-function: linear;"><h1 data-path-to-node="0">üìö M√≥dulo 12: Evas√£o de IDS, Firewalls e Honeypots (Evading IDS, Firewalls, and Honeypots) - Guia de Laborat√≥rio</h1><hr data-path-to-node="1"><h2 data-path-to-node="2">1. Vis√£o Geral e Conceito Fundamental</h2><p data-path-to-node="3">A <b>Evas√£o</b> √© a arte e a ci√™ncia de contornar ou enganar os mecanismos de seguran√ßa de uma rede, como Sistemas de Dete√ß√£o de Intrus√£o (<b>IDS</b>), Firewalls e Honeypots, para que o atacante possa executar as suas atividades sem ser detetado ou bloqueado.</p><ul data-path-to-node="4"><li><p data-path-to-node="4,0,0"><b>Objetivo:</b> Permitir que o tr√°fego malicioso (como <i>exploits</i> ou <i>payloads</i>) chegue ao alvo sem acionar alertas de seguran√ßa.</p></li></ul><hr data-path-to-node="5"><h2 data-path-to-node="6">2. Evas√£o de Sistemas de Dete√ß√£o de Intrus√£o (IDS)</h2><p data-path-to-node="7">Um IDS monitoriza o tr√°fego de rede para detetar padr√µes que correspondam a ataques conhecidos (assinaturas) ou que se desviem do comportamento normal (anomalias).</p><h3 data-path-to-node="8">T√©cnicas de Evas√£o de IDS</h3><div class="horizontal-scroll-wrapper"><div class="table-block-component"><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><table-block _nghost-ng-c984690523="" class="ng-star-inserted"><div _ngcontent-ng-c984690523="" class="table-block has-export-button"><div _ngcontent-ng-c984690523="" not-end-of-paragraph="" class="table-content not-end-of-paragraph" jslog="275421;track:impression,attention" data-hveid="0" decode-data-ved="1" data-ved="0CAAQ3ecQahgKEwiGw7zijJ-RAxUAAAAAHQAAAAAQyRE"><table data-path-to-node="9"><thead><tr><td><span data-path-to-node="9,0,0,0">T√©cnica</span></td><td><span data-path-to-node="9,0,1,0">Descri√ß√£o</span></td></tr></thead><tbody><tr><td><span data-path-to-node="9,1,0,0"><b>Fragmenta√ß√£o de Pacotes (Fragmentation)</b></span></td><td><span data-path-to-node="9,1,1,0">Dividir o <i>payload</i> do ataque em v√°rios pacotes pequenos. Muitos IDS mais antigos t√™m dificuldade em remontar os pacotes (re-assembly) a tempo, permitindo que a amea√ßa passe despercebida.</span></td></tr><tr><td><span data-path-to-node="9,2,0,0"><b>Ofusca√ß√£o de Assinatura (Evasion/Obfuscation)</b></span></td><td><span data-path-to-node="9,2,1,0">Usar codifica√ß√£o, <i>padding</i> (inserir bytes de lixo) ou diferentes representa√ß√µes de comandos para alterar a apar√™ncia do tr√°fego, evitando a correspond√™ncia exata com as assinaturas de IDS.</span></td></tr><tr><td><span data-path-to-node="9,3,0,0"><b>Pacotes de <i>Checksum</i> Inv√°lidos</b></span></td><td><span data-path-to-node="9,3,1,0">Enviar pacotes com um <i>checksum</i> TCP/IP incorreto. Alguns IDS podem ignorar estes pacotes, mas o alvo final pode, ironicamente, aceit√°-los ap√≥s corre√ß√£o pelo <i>hardware</i> de rede.</span></td></tr><tr><td><span data-path-to-node="9,4,0,0"><b>Inunda√ß√£o (Flooding)</b></span></td><td><span data-path-to-node="9,4,1,0">Gerar um volume massivo de tr√°fego irrelevante (<i>noise</i>) para sobrecarregar o IDS, for√ßando-o a descartar pacotes ou logs de forma a esconder o ataque real no meio do ru√≠do.</span></td></tr><tr><td><span data-path-to-node="9,5,0,0"><b>Codifica√ß√£o (Encoding)</b></span></td><td><span data-path-to-node="9,5,1,0">Codificar o <i>payload</i> (ex: URL encoding, <i>hex encoding</i>, uso de <b>Unicode</b> em vez de ASCII) de forma a que o servidor web o decifre, mas o IDS que n√£o o fizer o veja como tr√°fego normal.</span></td></tr></tbody></table></div><div _ngcontent-ng-c984690523="" hide-from-message-actions="" class="table-footer hide-from-message-actions ng-star-inserted"><button _ngcontent-ng-c984690523="" mat-button="" class="mdc-button mat-mdc-button-base export-sheets-button-container mat-mdc-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="184701;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_7f5793fee3306c21&quot;,&quot;c_d821f286710ba78c&quot;,null,null,null,null,null,null,1,null,null,null,0]]"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><span _ngcontent-ng-c984690523="" class="export-sheets-button"><span _ngcontent-ng-c984690523="" class="export-sheets-icon"><mat-icon _ngcontent-ng-c984690523="" role="img" fonticon="drive_spreadsheet" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="drive_spreadsheet"></mat-icon></span><span _ngcontent-ng-c984690523="">Exportar para as Planilhas</span></span></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><button _ngcontent-ng-c984690523="" mat-icon-button="" mattooltip="Copiar tabela" aria-label="Copiar tabela" data-test-id="copy-table-button" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="276666;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_7f5793fee3306c21&quot;,&quot;c_d821f286710ba78c&quot;,null,null,null,null,null,null,1,null,null,null,0]]"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c984690523="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----></table-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></div></div><hr data-path-to-node="10"><h2 data-path-to-node="11">3. Evas√£o de Firewalls</h2><p data-path-to-node="12">Um Firewall imp√µe regras de controlo de acesso, tipicamente bloqueando tr√°fego com base no endere√ßo IP, porta e, por vezes, nas regras da camada de aplica√ß√£o.</p><h3 data-path-to-node="13">T√©cnicas de Evas√£o de Firewall</h3><div class="horizontal-scroll-wrapper"><div class="table-block-component"><response-element class="" ng-version="0.0.0-PLACEHOLDER"><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><table-block _nghost-ng-c984690523="" class="ng-star-inserted"><div _ngcontent-ng-c984690523="" class="table-block has-export-button"><div _ngcontent-ng-c984690523="" not-end-of-paragraph="" class="table-content not-end-of-paragraph" jslog="275421;track:impression,attention" data-hveid="0" decode-data-ved="1" data-ved="0CAAQ3ecQahgKEwiGw7zijJ-RAxUAAAAAHQAAAAAQzBE"><table data-path-to-node="14"><thead><tr><td><span data-path-to-node="14,0,0,0">T√©cnica</span></td><td><span data-path-to-node="14,0,1,0">Descri√ß√£o</span></td></tr></thead><tbody><tr><td><span data-path-to-node="14,1,0,0"><b>Tunelamento (Tunneling)</b></span></td><td><span data-path-to-node="14,1,1,0">Envolver tr√°fego restrito (<i>payloads</i> ou protocolos) dentro de um protocolo permitido (ex: encapsular tr√°fego HTTP malicioso dentro de pacotes DNS ou ICMP).</span></td></tr><tr><td><span data-path-to-node="14,2,0,0"><b>Saltos de Porta (Port Hopping)</b></span></td><td><span data-path-to-node="14,2,1,0">Mudar dinamicamente a porta de comunica√ß√£o ap√≥s a conex√£o inicial. Se o firewall apenas inspecionar a primeira porta, o atacante pode mover-se para uma porta n√£o monitorizada.</span></td></tr><tr><td><span data-path-to-node="14,3,0,0"><b>Uso de Portas Permitidas (Protocol Spoofing)</b></span></td><td><span data-path-to-node="14,3,1,0">Enviar o tr√°fego de ataque sobre uma porta de servi√ßo comum (ex: HTTP na porta 80 ou HTTPS na porta 443), assumindo que estas portas s√£o, por defeito, abertas no firewall.</span></td></tr><tr><td><span data-path-to-node="14,4,0,0"><b>IP Spoofing (Falsifica√ß√£o de IP)</b></span></td><td><span data-path-to-node="14,4,1,0">Alterar o endere√ßo IP de origem no cabe√ßalho do pacote. Embora seja ineficaz para obter uma resposta direta, pode ser usado em ataques DoS ou para enganar Firewalls baseados em listas de controlo de acesso (ACL).</span></td></tr><tr><td><span data-path-to-node="14,5,0,0"><b>Explora√ß√£o de Configura√ß√£o (Rule Misconfiguration)</b></span></td><td><span data-path-to-node="14,5,1,0">Explorar regras de <i>firewall</i> mal configuradas (ex: se o firewall permitir tr√°fego <b>FTP na porta 21</b> mas n√£o inspecionar o conte√∫do, pode ser poss√≠vel enviar comandos maliciosos).</span></td></tr></tbody></table></div><div _ngcontent-ng-c984690523="" hide-from-message-actions="" class="table-footer hide-from-message-actions ng-star-inserted"><button _ngcontent-ng-c984690523="" mat-button="" class="mdc-button mat-mdc-button-base export-sheets-button-container mat-mdc-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" jslog="184701;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_7f5793fee3306c21&quot;,&quot;c_d821f286710ba78c&quot;,null,null,null,null,null,null,1,null,null,null,0]]"><span class="mat-mdc-button-persistent-ripple mdc-button__ripple"></span><span class="mdc-button__label"><span _ngcontent-ng-c984690523="" class="export-sheets-button"><span _ngcontent-ng-c984690523="" class="export-sheets-icon"><mat-icon _ngcontent-ng-c984690523="" role="img" fonticon="drive_spreadsheet" class="mat-icon notranslate google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="drive_spreadsheet"></mat-icon></span><span _ngcontent-ng-c984690523="">Exportar para as Planilhas</span></span></span><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><button _ngcontent-ng-c984690523="" mat-icon-button="" mattooltip="Copiar tabela" aria-label="Copiar tabela" data-test-id="copy-table-button" class="mdc-icon-button mat-mdc-icon-button mat-mdc-button-base mat-mdc-tooltip-trigger copy-button mat-unthemed ng-star-inserted" mat-ripple-loader-uninitialized="" mat-ripple-loader-class-name="mat-mdc-button-ripple" mat-ripple-loader-centered="" jslog="276666;track:generic_click,impression;BardVeMetadataKey:[[&quot;r_7f5793fee3306c21&quot;,&quot;c_d821f286710ba78c&quot;,null,null,null,null,null,null,1,null,null,null,0]]"><span class="mat-mdc-button-persistent-ripple mdc-icon-button__ripple"></span><mat-icon _ngcontent-ng-c984690523="" role="img" fonticon="content_copy" class="mat-icon notranslate gds-icon-l google-symbols mat-ligature-font mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-name="content_copy"></mat-icon><span class="mat-focus-indicator"></span><span class="mat-mdc-button-touch-target"></span></button><!----><!----><!----></div><!----></div><!----></table-block><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></response-element></div></div><hr data-path-to-node="15"><h2 data-path-to-node="16">4. Evas√£o e Manipula√ß√£o de Honeypots</h2><p data-path-to-node="17">Um <b>Honeypot</b> √© um sistema de computador ou armadilha de rede projetada para imitar um alvo real, atraindo atacantes para que as suas a√ß√µes possam ser observadas, registadas e analisadas.</p><h3 data-path-to-node="18">Como um Atacante Deteta/Evita Honeypots</h3><p data-path-to-node="19">Os atacantes experientes tentam identificar e evitar <i>honeypots</i> para n√£o desperdi√ßarem tempo e para esconderem as suas t√©cnicas.</p><ul data-path-to-node="20"><li><p data-path-to-node="20,0,0"><b>Identifica√ß√£o por Padr√£o de Servi√ßo:</b> Honeypots frequentemente imitam servi√ßos, mas podem falhar em implementar todas as funcionalidades de um sistema real. O atacante pode enviar comandos invulgares e ver se a resposta √© demasiado gen√©rica ou inesperada (ex: o <i>honeypot</i> <b>Cowrie</b> simula um servidor SSH/Telnet).</p></li><li><p data-path-to-node="20,1,0"><b>Tempo de Resposta/Comportamento Estranho:</b> Atrasos (lat√™ncia) invulgares ou comportamento de login que n√£o √© t√≠pico de um sistema operacional real podem indicar um <i>honeypot</i>.</p></li><li><p data-path-to-node="20,2,0"><b>Digital <i>Fingerprinting</i> (Impress√£o Digital):</b> O atacante pode usar ferramentas (como <b>Nmap</b> com scripts espec√≠ficos) para comparar as caracter√≠sticas do sistema alvo (vers√£o do sistema operacional, banners de servi√ßo) com bases de dados de <i>honeypots</i> conhecidos.</p></li><li><p data-path-to-node="20,3,0"><b>Evas√£o Pr√°tica (Laborat√≥rio - Cowrie):</b></p><ul data-path-to-node="20,3,1"><li><p data-path-to-node="20,3,1,0,0">No contexto de um laborat√≥rio (como visto nos <i>snippets</i>), um <b>Honeypot Cowrie</b> √© configurado, muitas vezes com um <b>redirecionamento de porta (iptables)</b> (ex: porta 22 para 2222) para atrair o tr√°fego SSH.</p></li><li><p data-path-to-node="20,3,1,1,0">A evas√£o neste caso implica que o atacante evite o IP/porta do <i>honeypot</i> se o detetar ou use t√©cnicas de evas√£o de IDS/Firewall para chegar ao alvo real na mesma rede, assumindo que o <i>honeypot</i> foi configurado como um ponto de falha (<i>fail-open</i>) ou que o tr√°fego leg√≠timo passa por perto.</p></li></ul></li></ul><hr data-path-to-node="21"><h2 data-path-to-node="22">5. Tarefas de Laborat√≥rio: IDS e Honeypot</h2><p data-path-to-node="23">As tarefas pr√°ticas demonstram como as ferramentas de seguran√ßa podem ser implantadas e como os ataques podem ser registados ou intercetados.</p><ul data-path-to-node="24"><li><p data-path-to-node="24,0,0"><b>Dete√ß√£o de Intrus√£o (IDS):</b> O <i>pen tester</i> usa o <b>Snort</b> (um IDS/IPS popular) para detetar <i>exploits</i> ou tr√°fego malicioso que corresponda a regras pr√©-definidas. O objetivo √© demonstrar que o IDS funciona.</p></li><li><p data-path-to-node="24,1,0"><b>Implanta√ß√£o de Honeypot:</b> O <i>pen tester</i> configura e implanta o <b>Cowrie Honeypot</b> (ex: no Ubuntu) para simular um servi√ßo (como SSH/Telnet), observando tentativas de login e comandos executados por um atacante que pensa estar num sistema real. O <i>honeypot</i> √© configurado para escutar numa porta diferente (ex: porta 2222) e o tr√°fego para a porta de servi√ßo leg√≠tima (porta 22) √© <b>redirecionado</b> para l√° usando regras de <code>iptables</code>.</p></li></ul></div>